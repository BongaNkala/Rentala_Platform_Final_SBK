<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenant Management - Rentala Platform</title>
    <link rel="stylesheet" href="tenants.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="rentala-design-system.css">
</head>
<body class="tenants-page">
    <div class="tenants-container">
        <!-- Header -->
        <header class="tenants-header">
            <div class="header-content">
                <div class="header-title">
                    <h1><i class="fas fa-users me-2"></i> Tenant Management</h1>
                    <p>Manage all your rental property tenants in one place</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="addTenantBtn">
                        <i class="fas fa-user-plus me-2"></i> Add Tenant
                    </button>
                    <button class="btn btn-secondary" id="refreshTenants">
                        <i class="fas fa-sync-alt me-2"></i> Refresh
                    </button>
                </div>
            </div>
            
            <!-- Stats -->
            <div class="stats-section">
                <div class="stat-item">
                    <div class="stat-value" id="totalTenants">0</div>
                    <div class="stat-label">Total Tenants</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="activeTenants">0</div>
                    <div class="stat-label">Active</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="pendingTenants">0</div>
                    <div class="stat-label">Pending</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalRent">R0</div>
                    <div class="stat-label">Monthly Revenue</div>
                </div>
            </div>
        </header>
        
        <!-- Controls -->
        <div class="controls-section">
            <div class="search-box">
                <input type="text" class="search-input" id="tenantSearch" placeholder="Search tenants by name, email, or property...">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="active">Active</button>
                <button class="filter-btn" data-filter="inactive">Inactive</button>
                <button class="filter-btn" data-filter="pending">Pending</button>
            </div>
        </div>
        
        <!-- Tenants Grid -->
        <div id="tenantsContainer" class="tenants-grid">
            <!-- Tenants will be loaded here dynamically -->
            <div class="tenants-loading">
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading tenants...</div>
            </div>
        </div>
    </div>
    
    <!-- Add/Edit Tenant Modal -->
    <div class="tenant-modal" id="tenantModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Tenant</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="tenantForm">
                    <input type="hidden" id="tenantId" name="id">
                    
                    <div class="form-group">
                        <label for="fullName" class="form-label required">Full Name</label>
                        <input type="text" id="fullName" name="fullName" class="form-control" required placeholder="John Smith">
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="form-label required">Email Address</label>
                        <input type="email" id="email" name="email" class="form-control" required placeholder="john.smith@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="tel" id="phone" name="phone" class="form-control" placeholder="+27 82 123 4567">
                    </div>
                    
                    <div class="form-row d-grid grid-col-2 gap-4">
                        <div class="form-group">
                            <label for="propertyId" class="form-label required">Property</label>
                            <select id="propertyId" name="propertyId" class="form-select" required>
                                <option value="">Select Property</option>
                                <!-- Properties will be loaded dynamically -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="rentAmount" class="form-label required">Monthly Rent (ZAR)</label>
                            <input type="number" id="rentAmount" name="rentAmount" class="form-control" required placeholder="8500" min="0" step="100">
                        </div>
                    </div>
                    
                    <div class="form-row d-grid grid-col-2 gap-4">
                        <div class="form-group">
                            <label for="leaseStart" class="form-label">Lease Start Date</label>
                            <input type="date" id="leaseStart" name="leaseStart" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="leaseEnd" class="form-label">Lease End Date</label>
                            <input type="date" id="leaseEnd" name="leaseEnd" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="status" class="form-label required">Status</label>
                        <select id="status" name="status" class="form-select" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="pending">Pending</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes" class="form-label">Additional Notes</label>
                        <textarea id="notes" name="notes" class="form-control" rows="3" placeholder="Enter any additional information about the tenant..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button type="submit" form="tenantForm" class="btn btn-primary" id="saveBtn">Save Tenant</button>
            </div>
        </div>
    </div>
    
    <!-- Success Toast -->
    <div class="toast-container" id="toastContainer"></div>
    
    <script src="tenants.js"></script>
    <script>
        // Toast notification system
        class Toast {
            static show(message, type = 'success') {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.innerHTML = `
                    <div class="toast-content">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                        <span>${message}</span>
                    </div>
                    <button class="toast-close">&times;</button>
                `;
                
                container.appendChild(toast);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    toast.classList.add('fade-out');
                    setTimeout(() => toast.remove(), 300);
                }, 5000);
                
                // Close button
                toast.querySelector('.toast-close').addEventListener('click', () => {
                    toast.classList.add('fade-out');
                    setTimeout(() => toast.remove(), 300);
                });
            }
        }
        
        // Add toast styles
        const toastStyles = document.createElement('style');
        toastStyles.textContent = `
            .toast-container {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: var(--z-toast);
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            .toast {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: var(--radius-lg);
                padding: 12px 16px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 12px;
                box-shadow: var(--shadow-lg);
                animation: slideInRight 0.3s ease-out;
                max-width: 350px;
            }
            
            .toast-success {
                border-left: 4px solid var(--color-success);
            }
            
            .toast-error {
                border-left: 4px solid var(--color-danger);
            }
            
            .toast-warning {
                border-left: 4px solid var(--color-warning);
            }
            
            .toast-info {
                border-left: 4px solid var(--color-info);
            }
            
            .toast-content {
                display: flex;
                align-items: center;
                gap: 8px;
                flex: 1;
            }
            
            .toast-content i {
                font-size: 1.25rem;
            }
            
            .toast-success .toast-content i { color: var(--color-success); }
            .toast-error .toast-content i { color: var(--color-danger); }
            .toast-warning .toast-content i { color: var(--color-warning); }
            .toast-info .toast-content i { color: var(--color-info); }
            
            .toast-close {
                background: none;
                border: none;
                color: var(--text-muted);
                font-size: 1.25rem;
                cursor: pointer;
                padding: 0;
                line-height: 1;
            }
            
            .toast-close:hover {
                color: var(--color-danger);
            }
            
            .fade-out {
                animation: fadeOut 0.3s ease-out forwards;
            }
            
            @keyframes fadeOut {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100%); }
            }
            
            @media (max-width: 640px) {
                .toast-container {
                    left: 20px;
                    right: 20px;
                }
                
                .toast {
                    max-width: none;
                }
            }
        `;
        document.head.appendChild(toastStyles);
    </script>
</body>
</html>
